(()=>{"use strict";var e={314:function(e,t){var r,n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,a){function o(e){try{c(n.next(e))}catch(e){a(e)}}function l(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,l)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(c){return function(l){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,l[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&l[0]?n.return:l[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,l[1])).done)return i;switch(n=0,i&&(l=[2&l[0],i.value]),l[0]){case 0:case 1:i=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,n=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==l[0]&&2!==l[0])){o=0;continue}if(3===l[0]&&(!i||l[1]>i[0]&&l[1]<i[3])){o.label=l[1];break}if(6===l[0]&&o.label<i[1]){o.label=i[1],i=l;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(l);break}i[2]&&o.ops.pop(),o.trys.pop();continue}l=t.call(e,o)}catch(e){l=[6,e],n=0}finally{r=i=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.fetchConfigData=t.config=void 0,t.fetchConfigData=function(e){return n(this,void 0,void 0,(function(){var n;return i(this,(function(i){switch(i.label){case 0:return t.config&&r===e?[2,t.config]:[3,1];case 1:return i.trys.push([1,4,,5]),t.config=void 0,[4,fetch(e)];case 2:return(n=i.sent()).ok?[4,n.json()]:[2,"HTTP error fetching: ".concat(e," status: ").concat(n.status)];case 3:return t.config=i.sent(),r=e,[2,t.config];case 4:return[2,"An error occurred while fetching the config data:"+i.sent()];case 5:return[2]}}))}))}},199:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,a){function o(e){try{c(n.next(e))}catch(e){a(e)}}function l(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,l)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(c){return function(l){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,l[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&l[0]?n.return:l[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,l[1])).done)return i;switch(n=0,i&&(l=[2&l[0],i.value]),l[0]){case 0:case 1:i=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,n=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==l[0]&&2!==l[0])){o=0;continue}if(3===l[0]&&(!i||l[1]>i[0]&&l[1]<i[3])){o.label=l[1];break}if(6===l[0]&&o.label<i[1]){o.label=i[1],i=l;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(l);break}i[2]&&o.ops.pop(),o.trys.pop();continue}l=t.call(e,o)}catch(e){l=[6,e],n=0}finally{r=i=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.fetchHistoryData=t.historyTooltip=t.historyColumns=t.historyItemSchema=void 0;var a=r(314);function o(e){var t=e.adr.split(";"),r=t[0],n=t.slice(1),i=n.length>0?n.join(";"):"",a={dt:new Date(e.dt),adr1:r,adr2:i,cat:e.cat,tx_id:e.tx_id,blk_id:e.blk_id,value:e.value,fee_qty:e.fee_qty,fee_value:e.fee_value},o=0,l=0;return e.tokens.forEach((function(e){e.qty>=0?1==++o?(a.debit1Code=e.code,a.debit1Qty=e.qty,a.debit1Value=e.value):2===o&&(a.debit2Code=e.code,a.debit2Qty=e.qty,a.debit2Value=e.value):1==++l?(a.credit1Code=e.code,a.credit1Qty=e.qty,a.credit1Value=e.value):2===l&&(a.credit2Code=e.code,a.credit2Qty=e.qty,a.credit2Value=e.value)})),a}t.historyItemSchema={model:{fields:{dt:{type:"date"},debit1Code:{type:"string"},debit1Qty:{type:"number"},debit1Value:{type:"number"},debit2Code:{type:"string"},debit2Qty:{type:"number"},debit2Value:{type:"number"},credit1Code:{type:"string"},credit1Qty:{type:"number"},credit1Value:{type:"number"},credit2Code:{type:"string"},credit2Qty:{type:"number"},credit2Value:{type:"number"},adr1:{type:"string"},adr2:{type:"string"},cat:{type:"string"},tx_id:{type:"string"},blkid:{type:"number"},value:{type:"number"},fee_qty:{type:"number"},fee_value:{type:"number"}}}},(window||r.g).currencyCode=function(){var e;return null!==(e=null===a.config||void 0===a.config?void 0:a.config.cur_code)&&void 0!==e?e:""},t.historyColumns=function(e){return void 0===e&&(e=[]),[{field:"dt",title:"Date",width:e[0]||120,format:"{0:dd.MM.yy HH:mm:ss}"},{field:"blk_id",title:"Block",width:e[1]||70,template:'<a href="https://defiscan.live/blocks/${blk_id}" target="_blank">${blk_id}</a>'},{field:"adr1",title:"Addr1",width:e[2]||70,filterable:{multi:!0,search:!0},template:'<a href="https://defiscan.live/address/${adr1}" target="_blank">${adr1}</a>'},{field:"adr2",title:"Addr2",width:e[3]||70,filterable:{multi:!0,search:!0},template:'<a href="https://defiscan.live/address/${adr2}" target="_blank">${adr2}</a>'},{field:"tx_id",title:"tx",width:e[4]||50,template:'<a href="https://defiscan.live/transactions/${tx_id}" target="_blank">${tx_id}</a>'},{field:"cat",title:"Category",width:e[5]||100,filterable:{multi:!0}},{field:"debit1Qty",title:"D1.Qty",width:e[6]||85,format:"{0:n}"},{field:"debit1Code",title:"D1.Code",width:e[7]||85,filterable:{multi:!0}},{field:"debit2Qty",title:"D2.Qty",width:e[8]||85,format:"{0:n}"},{field:"debit2Code",title:"D2.Code",width:e[9]||85,filterable:{multi:!0}},{field:"credit1Qty",title:"C1.Qty",width:e[10]||85,format:"{0:n}"},{field:"credit1Code",title:"C1.Code",width:e[11]||85,filterable:{multi:!0}},{field:"credit2Qty",title:"C2.Qty",width:e[12]||85,format:"{0:n}"},{field:"credit2Code",title:"C2.Code",width:e[13]||85,filterable:{multi:!0}},{field:"value",width:e[14]||100,format:"{0:n}",aggregates:["sum"],footerTemplate:'âˆ‘ #=kendo.toString(sum,"n2") + " " + currencyCode() #'},{field:"fee_qty",width:e[15]||80,format:"{0:#.########}"},{field:"fee_value",format:"{0:#.########}"}]},t.historyTooltip=function(e){var t=e.target.text().trim();switch(t){case"Addr1":return"Address";case"Addr2":return"Address 2";case"D1.Qty":case"D1.Qty":return"Debit 1 Quantity";case"D1.Code":return"Debit 1 Token Code";case"D1.Value":return"Debit 1 Value";case"D2.Qty":return"Debit 2 Quantity";case"D2.Code":return"Debit 2 Token Code";case"D2.Value":return"Debit 2 Value";case"C1.Qty":return"Credit 1 Quantity";case"C1.Code":return"Credit 1 Token Code";case"C1.Value":return"Credit 1 Value";case"C2.Qty":return"Credit 2 Quantity";case"C2.Code":return"Credit 2 Token Code";case"C2.Value":return"Credit 2 Value";case"value":return"value in "+(null===a.config||void 0===a.config?void 0:a.config.cur_code);case"fee_value":return"fee in "+(null===a.config||void 0===a.config?void 0:a.config.cur_code);default:return t}},t.fetchHistoryData=function(e){return n(this,void 0,void 0,(function(){var t;return i(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,fetch(e)];case 1:return(t=r.sent()).ok?[4,t.json()]:[2,"HTTP error fetching: ".concat(e," status: ").concat(t.status)];case 2:return[2,r.sent().history.map(o)];case 3:return[2,"An error occurred while fetching the data:"+r.sent()];case 4:return[2]}}))}))}},607:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,a){function o(e){try{c(n.next(e))}catch(e){a(e)}}function l(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,l)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(c){return function(l){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,l[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&l[0]?n.return:l[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,l[1])).done)return i;switch(n=0,i&&(l=[2&l[0],i.value]),l[0]){case 0:case 1:i=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,n=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==l[0]&&2!==l[0])){o=0;continue}if(3===l[0]&&(!i||l[1]>i[0]&&l[1]<i[3])){o.label=l[1];break}if(6===l[0]&&o.label<i[1]){o.label=i[1],i=l;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(l);break}i[2]&&o.ops.pop(),o.trys.pop();continue}l=t.call(e,o)}catch(e){l=[6,e],n=0}finally{r=i=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}};Object.defineProperty(t,"__esModule",{value:!0});var a,o,l,c,u,d=r(199),s=r(314);function f(e,t){var r=localStorage.getItem(e);return r?JSON.parse(r):t}$(document).on("ready",(function(){!function(){n(this,void 0,void 0,(function(){var e;return i(this,(function(t){return e=JSON.parse(localStorage.getItem("dfitaxhistory.colWidths")||"[]"),a=$("#grid").kendoGrid({toolbar:[{template:"<label>Access key:</label>"},{template:"<input id='accessKey' />"},{template:"<label>Year:</label>"},{template:"<input id='yearTexbox' />"},{template:"<label>Month:</label>"},{template:"<input id='monthTexbox' />"},{template:"<button id='btnLoad'>Load</button>"},"excel"],dataSource:{data:u,schema:d.historyItemSchema,aggregate:[{field:"value",aggregate:"sum"}]},columns:(0,d.historyColumns)(e),sortable:!0,resizable:!0,filterable:!0,filterMenuInit:function(e){var t,r;(null===(t=e.field)||void 0===t?void 0:t.startsWith("adr"))&&(null===(r=e.container)||void 0===r||r.addClass("widerMenu"))},excel:{fileName:"dfitax_history.xlsx",filterable:!0,allPages:!0},excelExport:function(e){for(var t=e.workbook.sheets[0],r=1;r<t.rows.length;r++)for(var n=t.rows[r],i=0;i<n.cells.length;i++)n.cells[i].value instanceof Date&&(n.cells[i].format="dd.MM.yy hh:mm:ss")},columnResize:function(e){var t=[];a.columns.forEach((function(e){t.push(e.width)})),localStorage.setItem("dfitaxhistory.colWidths",JSON.stringify(t))}}).data("kendoGrid"),a.thead.kendoTooltip({filter:"th",content:d.historyTooltip}),o=$("#accessKey").kendoTextBox({value:f("accessKey","")}).data("kendoTextBox"),l=$("#yearTexbox").kendoNumericTextBox({format:"#",decimals:0,value:f("dfitaxhistory.year",2023),min:2019}).data("kendoNumericTextBox"),c=$("#monthTexbox").kendoNumericTextBox({format:"#",decimals:0,value:f("dfitaxhistory.month",0),min:0,max:12}).data("kendoNumericTextBox"),$("#btnLoad").kendoButton({icon:"reload",click:function(){return n(this,void 0,void 0,(function(){var e,t,r,n,f;return i(this,(function(i){switch(i.label){case 0:return(e=o.value().trim())?[3,1]:(alert("Access Key is empty!"),[3,5]);case 1:return[4,(0,s.fetchConfigData)("".concat("https://api.dfi.tax/v02/cfg/get/").concat(e))];case 2:return"string"!=typeof(t=i.sent())?[3,3]:(alert(t),[3,5]);case 3:return r=l.value(),n=c.value(),f="".concat("https://api.dfi.tax/v02/hst/").concat(e,"/").concat(r,"/").concat(n),[4,(0,d.fetchHistoryData)(f)];case 4:"string"==typeof(u=i.sent())?alert(u):(a.dataSource.data(u),localStorage.setItem("accessKey",JSON.stringify(e)),localStorage.setItem("dfitaxhistory.year",JSON.stringify(r)),localStorage.setItem("dfitaxhistory.month",JSON.stringify(n)),$(".k-filterable").each((function(e,t){var r;return null===(r=$(t).data("kendoFilterMultiCheck"))||void 0===r?void 0:r._init()}))),i.label=5;case 5:return[2]}}))}))}}),[2]}))}))}(),$(window).on("resize",(function(){null==a||a.resize()}))}))}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var a=t[n]={exports:{}};return e[n].call(a.exports,a,a.exports,r),a.exports}r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r(607)})();
//# sourceMappingURL=bundle.js.map