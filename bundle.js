(()=>{"use strict";var e={199:function(e,t){var r=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(a,n){function o(e){try{c(i.next(e))}catch(e){n(e)}}function l(e){try{c(i.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,l)}c((i=i.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,i,a,n,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return n={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function l(l){return function(c){return function(l){if(r)throw new TypeError("Generator is already executing.");for(;n&&(n=0,l[0]&&(o=0)),o;)try{if(r=1,i&&(a=2&l[0]?i.return:l[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,l[1])).done)return a;switch(i=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,i=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==l[0]&&2!==l[0])){o=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){o.label=l[1];break}if(6===l[0]&&o.label<a[1]){o.label=a[1],a=l;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(l);break}a[2]&&o.ops.pop(),o.trys.pop();continue}l=t.call(e,o)}catch(e){l=[6,e],i=0}finally{r=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}};function a(e){var t={dt:new Date(e.dt),adr:e.adr,cat:e.cat,tx_id:e.tx_id,blk_id:e.blk_id,value:e.value,fee_qty:e.fee_qty,fee_value:e.fee_value},r=0,i=0;return e.tokens.forEach((function(e){e.qty>=0?1==++r?(t.debit1Code=e.code,t.debit1Qty=e.qty,t.debit1Value=e.value):2===r&&(t.debit2Code=e.code,t.debit2Qty=e.qty,t.debit2Value=e.value):1==++i?(t.credit1Code=e.code,t.credit1Qty=e.qty,t.credit1Value=e.value):2===i&&(t.credit2Code=e.code,t.credit2Qty=e.qty,t.credit2Value=e.value)})),t}Object.defineProperty(t,"__esModule",{value:!0}),t.fetchHistoryData=t.historyTooltip=t.historyColumns=t.historyItemSchema=void 0,t.historyItemSchema={model:{fields:{dt:{type:"date"},debit1Code:{type:"string"},debit1Qty:{type:"number"},debit1Value:{type:"number"},debit2Code:{type:"string"},debit2Qty:{type:"number"},debit2Value:{type:"number"},credit1Code:{type:"string"},credit1Qty:{type:"number"},credit1Value:{type:"number"},credit2Code:{type:"string"},credit2Qty:{type:"number"},credit2Value:{type:"number"},adr:{type:"string"},cat:{type:"string"},tx_id:{type:"string"},blkid:{type:"number"},value:{type:"number"},fee_qty:{type:"number"},fee_value:{type:"number"}}}},t.historyColumns=function(e,t){return void 0===t&&(t=[]),[{field:"dt",title:"Date",width:t[0]||120,format:"{0:dd.MM.yy HH:mm:ss}"},{field:"blk_id",title:"Block",width:t[1]||70,template:'<a href="https://defiscan.live/blocks/${blk_id}" target="_blank">${blk_id}</a>'},{field:"adr",title:"Address",width:t[2]||70,filterable:{multi:!0,search:!0},template:'<a href="https://defiscan.live/address/${adr}" target="_blank">${adr}</a>'},{field:"tx_id",title:"tx",width:t[3]||50,template:'<a href="https://defiscan.live/transactions/${tx_id}" target="_blank">${tx_id}</a>'},{field:"cat",title:"Category",width:t[4]||100,filterable:{multi:!0}},{field:"debit1Qty",title:"D1.Qty",width:t[5]||85,format:"{0:n}"},{field:"debit1Code",title:"D1.Code",width:t[6]||85,filterable:{multi:!0}},{field:"debit2Qty",title:"D2.Qty",width:t[7]||85,format:"{0:n}"},{field:"debit2Code",title:"D2.Code",width:t[8]||85,filterable:{multi:!0}},{field:"credit1Qty",title:"C1.Qty",width:t[9]||85,format:"{0:n}"},{field:"credit1Code",title:"C1.Code",width:t[10]||85,filterable:{multi:!0}},{field:"credit2Qty",title:"C2.Qty",width:t[11]||85,format:"{0:n}"},{field:"credit2Code",title:"C2.Code",width:t[12]||85,filterable:{multi:!0}},{field:"value",width:t[13]||100,format:"{0:n} "+e},{field:"fee_qty",width:t[14]||80,format:"{0:#.########}"},{field:"fee_value",format:"{0:#.########}"}]},t.historyTooltip=function(e){var t=e.target.text().trim();switch(t){case"D1.Qty":return"Debit 1 Quantity";case"D1.Code":return"Debit 1 Token Code";case"D1.Value":return"Debit 1 Value";case"D2.Qty":return"Debit 2 Quantity";case"D2.Code":return"Debit 2 Token Code";case"D2.Value":return"Debit 2 Value";case"C1.Qty":return"Credit 1 Quantity";case"C1.Code":return"Credit 1 Token Code";case"C1.Value":return"Credit 1 Value";case"C2.Qty":return"Credit 2 Quantity";case"C2.Code":return"Credit 2 Token Code";case"C2.Value":return"Credit 2 Value";default:return t}},t.fetchHistoryData=function(e){return r(this,void 0,void 0,(function(){var t;return i(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,fetch(e)];case 1:return(t=r.sent()).ok?[4,t.json()]:[2,"HTTP error fetching: ".concat(e," status: ").concat(t.status)];case 2:return[2,r.sent().history.map(a)];case 3:return[2,"An error occurred while fetching the data:"+r.sent()];case 4:return[2]}}))}))}},607:function(e,t,r){var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(a,n){function o(e){try{c(i.next(e))}catch(e){n(e)}}function l(e){try{c(i.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,l)}c((i=i.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var r,i,a,n,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return n={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function l(l){return function(c){return function(l){if(r)throw new TypeError("Generator is already executing.");for(;n&&(n=0,l[0]&&(o=0)),o;)try{if(r=1,i&&(a=2&l[0]?i.return:l[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,l[1])).done)return a;switch(i=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,i=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==l[0]&&2!==l[0])){o=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){o.label=l[1];break}if(6===l[0]&&o.label<a[1]){o.label=a[1],a=l;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(l);break}a[2]&&o.ops.pop(),o.trys.pop();continue}l=t.call(e,o)}catch(e){l=[6,e],i=0}finally{r=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}};Object.defineProperty(t,"__esModule",{value:!0});var n,o,l,c,u,d=r(199);$(document).on("ready",(function(){!function(){i(this,void 0,void 0,(function(){function e(e,t){var r=localStorage.getItem(e);return r?JSON.parse(r):t}var t;return a(this,(function(r){return t=JSON.parse(localStorage.getItem("dfitaxhistory.colWidths")||"[]"),n=$("#grid").kendoGrid({toolbar:[{template:"<label>Access key:</label>"},{template:"<input id='accessKey' />"},{template:"<label>Year:</label>"},{template:"<input id='yearTexbox' />"},{template:"<label>Month:</label>"},{template:"<input id='monthTexbox' />"},{template:"<button id='btnLoad'>Load</button>"},"excel"],dataSource:{data:u,schema:d.historyItemSchema},columns:(0,d.historyColumns)("",t),sortable:!0,resizable:!0,filterable:!0,excel:{fileName:"dfitax_history.xlsx",filterable:!0,allPages:!0},excelExport:function(e){for(var t=e.workbook.sheets[0],r=1;r<t.rows.length;r++)for(var i=t.rows[r],a=0;a<i.cells.length;a++)i.cells[a].value instanceof Date&&(i.cells[a].format="dd.MM.yy hh:mm:ss")},columnResize:function(e){var t=[];n.columns.forEach((function(e){t.push(e.width)})),localStorage.setItem("dfitaxhistory.colWidths",JSON.stringify(t))}}).data("kendoGrid"),n.thead.kendoTooltip({filter:"th",content:d.historyTooltip}),o=$("#accessKey").kendoTextBox({value:e("accessKey","")}).data("kendoTextBox"),l=$("#yearTexbox").kendoNumericTextBox({format:"#",decimals:0,value:e("dfitaxhistory.year",2023),min:2019}).data("kendoNumericTextBox"),c=$("#monthTexbox").kendoNumericTextBox({format:"#",decimals:0,value:e("dfitaxhistory.month",0),min:0,max:12}).data("kendoNumericTextBox"),$("#btnLoad").kendoButton({icon:"reload",click:function(){return i(this,void 0,void 0,(function(){var e,t,r,i;return a(this,(function(a){switch(a.label){case 0:return(e=o.value().trim())?(t=l.value(),r=c.value(),i="".concat("https://api.dfi.tax/v02/hst/").concat(e,"/").concat(t,"/").concat(r),[4,(0,d.fetchHistoryData)(i)]):(alert("Access Key is empty!"),[2]);case 1:return"string"==typeof(u=a.sent())?alert(u):(n.setDataSource(u),localStorage.setItem("accessKey",JSON.stringify(e)),localStorage.setItem("dfitaxhistory.year",JSON.stringify(t)),localStorage.setItem("dfitaxhistory.month",JSON.stringify(r))),[2]}}))}))}}),[2]}))}))}(),$(window).on("resize",(function(){null==n||n.resize()}))}))}},t={};!function r(i){var a=t[i];if(void 0!==a)return a.exports;var n=t[i]={exports:{}};return e[i].call(n.exports,n,n.exports,r),n.exports}(607)})();
//# sourceMappingURL=bundle.js.map